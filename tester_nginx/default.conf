# Custom log format to see Tailscale IP and Proxy IP
log_format tsd_debug 'Proxy_IP: $remote_addr | Client_IP: $http_x_forwarded_for | User: $http_x_webauth_user | "$request"';

server {
    listen 80;
    
    # Apply the log format
    access_log /dev/stdout tsd_debug;

    location / {
        default_type text/plain;
        
        # This will display the Tailscale details in your browser
        return 200 "--- Tailscale Connection Info ---\n
Remote Addr (Proxy): $remote_addr
Forwarded For (Client): $http_x_forwarded_for
Tailscale User: $http_x_webauth_user\n";
    }
}